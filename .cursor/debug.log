{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767276131376}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767276131377}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767276131377}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767276131377}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767276131378}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767276131378}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767276131380}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767276131381}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767276131381}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767276131381}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767276131381}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767276131381}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767276131507}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767276131508}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767276131509}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767276131509}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767276131509}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767276131509}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767276131511}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767276131512}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767276131513}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767276131513}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767276131513}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767276131513}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767276131896}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767276131897}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767276131898}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767276132058}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767276132059}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767276132061}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767276132146}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767276132147}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767276132151}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767276132531}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767276132531}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767276132532}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277318574}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277318574}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277318575}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277318575}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277318575}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277318575}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277318576}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277318576}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277318577}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277318577}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277318577}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277318577}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277318918}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277318918}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277318919}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277319223}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277319224}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277319224}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277341078}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277341078}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277341078}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277341078}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277341079}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277341779}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277341780}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277403170}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277403170}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277403171}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277403171}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277403171}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277403171}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277403177}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277403177}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277403178}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277403178}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277403179}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277403179}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277403181}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277403181}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277403181}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277403181}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277403182}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277403182}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277403183}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277403183}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277403184}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277403184}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277403184}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277403184}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277403821}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277403822}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277403824}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277403832}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277403832}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277403833}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277403836}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277403837}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277403838}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277403841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277403841}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277403841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277956490}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277956491}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277956492}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277956492}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277956492}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277956492}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277956496}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277956496}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277956497}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277956497}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277956497}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277956497}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277956850}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277956850}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277956851}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277956856}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277956856}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277956857}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277965828}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277965829}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277965829}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277965829}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277965830}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277965830}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277965840}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277965841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277965841}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277965841}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277965841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277965841}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277965845}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277965845}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277965845}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277965845}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277965846}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277965846}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277965852}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277965852}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277965854}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277965854}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277965855}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277965855}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277966285}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277966286}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277966287}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277966300}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277966300}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277966301}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277966311}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277966312}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277966313}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277966411}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277966411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277966412}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277966412}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277966412}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277966412}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277966413}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277966413}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277966413}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277966414}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277966414}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277966414}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277966463}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277966464}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277966464}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277966665}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277966665}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277966666}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277966666}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277966667}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277966667}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277966764}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277966766}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277966768}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277966774}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277966775}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277966775}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277966814}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277966814}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277966815}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277966816}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277966816}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277966816}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277967011}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277967012}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277967013}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277967178}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277967178}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277967179}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277968752}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277968753}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277968753}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277968753}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277968753}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277968754}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277968756}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277968757}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277968757}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277968757}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277968757}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277968757}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277968760}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277968760}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277968761}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277968761}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277968761}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277968761}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767277968762}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767277968762}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767277968762}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767277968762}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767277968763}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767277968763}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277969099}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277969100}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277969100}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277969103}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277969103}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277969104}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277969119}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277969120}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277969120}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767277969125}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767277969125}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767277969126}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278677409}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278677411}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278677412}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278677412}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278677413}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278677413}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278677419}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278677420}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278677421}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278677421}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278677421}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278677422}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278677866}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278677867}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278677868}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278678483}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278678484}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278678485}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278790687}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278790689}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278790690}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278790690}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278790690}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278790690}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278790706}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278790706}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278790707}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278790707}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278790707}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278790707}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278790709}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278790714}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278790714}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278790714}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278790714}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278790714}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278790715}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278790709}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278790710}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278790710}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278790710}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278790710}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278791368}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278791369}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278791370}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278791380}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278791380}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278791381}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278791386}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278791387}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278791388}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278791420}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278791425}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278791426}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278794320}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278794321}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278794322}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278794322}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278794322}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278794322}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278794331}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278794331}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278794332}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278794332}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278794332}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278794332}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278794323}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278794323}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278794324}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278794324}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278794324}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278794324}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278794333}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278794334}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278794335}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278794335}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278794335}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278794335}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278794680}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278794680}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278794681}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278794690}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278794690}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278794691}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278794695}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278794695}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278794696}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278794697}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278794698}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278794698}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278795497}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278795497}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278795498}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278795498}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278795498}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278795498}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278795504}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278795504}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278795505}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278795505}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278795505}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278795505}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/prompts/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278795507}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278795507}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278795508}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278795508}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278795508}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278795508}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"app/api/categories/route.ts:GET","message":"Route entry","data":{"hasUserId":true},"timestamp":1767278795509}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Clerk env key modes (no secrets)","data":{"publishableKeyMode":"test","secretKeyMode":"test"},"timestamp":1767278795509}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H4","location":"lib/auth.ts:getSupabaseToken","message":"auth() context received","data":{"hasUserId":true,"hasSessionId":true,"hasGetToken":true},"timestamp":1767278795510}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Requesting default Clerk session token (no template) to inspect issuer","data":{},"timestamp":1767278795510}
{"sessionId":"debug-session","runId":"pre-fix2","hypothesisId":"H3","location":"lib/auth.ts:getSupabaseToken","message":"Default token issuer (iss) derived","data":{"issuer":"https://enjoyed-terrier-28.clerk.accounts.dev"},"timestamp":1767278795510}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H1","location":"lib/auth.ts:getSupabaseToken","message":"Requesting Clerk token with template","data":{"template":"supabase"},"timestamp":1767278795510}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278795857}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278795858}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278795858}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278795863}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278795864}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/categories/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278795865}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278795867}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278795868}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278795868}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:getSupabaseToken","message":"getToken() returned","data":{"tokenPresent":true,"jwt":{"headerAlg":"RS256","headerKid":"ins_37Pt7fjf4bi8iTRj1zsuvIGOwIL","headerTyp":"JWT","issuer":"https://enjoyed-terrier-28.clerk.accounts.dev","audience":"authenticated","role":"authenticated"}},"timestamp":1767278795885}
{"sessionId":"debug-session","runId":"pre-fix","hypothesisId":"H2","location":"lib/auth.ts:requireSupabaseToken","message":"Token presence after getSupabaseToken()","data":{"tokenPresent":true},"timestamp":1767278795886}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"H1","location":"app/api/prompts/route.ts:GET","message":"Using Supabase user client (Clerk JWT template succeeded)","data":{},"timestamp":1767278795886}
